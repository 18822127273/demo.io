"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[1952],{1952:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("成员绑定")]),t("back-button"),t("div",{staticClass:"commadd_content"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容"},on:{select:e.handleSelect},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"与成员关系",prop:"relation_type"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.relation_type,callback:function(t){e.$set(e.ruleForm,"relation_type",t)},expression:"ruleForm.relation_type"}},[t("el-option",{attrs:{label:"夫妻",value:0}}),t("el-option",{attrs:{label:"父子/母子",value:1}}),t("el-option",{attrs:{label:"其他关系",value:2}})],1)],1),t("el-form-item",[t("el-button",{attrs:{plain:!0,type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即绑定")]),t("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},s=[],o=(r(7658),r(1502)),a={data(){return{timeout:null,restaurants:[],list:[],id:"",ruleForm:{relation_type:"",id:"",name:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],relation_type:[{required:!0,message:"请选择",trigger:"blur"}]}}},beforeRouteLeave(e,t,r){e.meta.keepAlive=!0,r()},mounted(){this.init()},methods:{querySearchAsync(e,t){var r=this.restaurants,l=e?r.filter(this.createStateFilter(e)):r;clearTimeout(this.timeout),this.timeout=setTimeout((()=>{t(l)}),1e3*Math.random())},createStateFilter(e){return t=>t.value.toLowerCase().indexOf(e.toLowerCase())>-1},handleSelect(e){this.id=e.id},init(){(0,o.Kz)({access_token:this.$store.state.token}).then((e=>{let t=[];e.list.forEach((e=>{const r={id:e.id,value:e.name};t.push(r)})),this.restaurants=t}))},submitForm(e){const t=this.ruleForm,r=this.$route.query.id;this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;(0,o.x2)({access_token:this.$store.state.token,people_id:r,relation_id:this.id,relation_type:t.relation_type}).then((e=>{})),this.$message({message:"添加成功",type:"success"})}))},resetForm(e){this.$refs[e].resetFields()}}},i=a,n=r(1001),u=(0,n.Z)(i,l,s,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=1952.8b0b50ca.js.map