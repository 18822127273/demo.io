"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[4771],{4771:function(e,r,t){t.r(r),t.d(r,{default:function(){return c}});var a=function(){var e=this,r=e._self._c;return r("div",[r("div",[r("div",{staticClass:"commaddcenter_header"},[r("back-button"),r("el-button",{attrs:{plain:!0,type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("更新信息")])],1),r("div",{staticClass:"commadd_content"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"名字",prop:"name"}},[r("el-input",{attrs:{width:"100"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:" ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"曾用名",prop:"name_used_before"}},[r("el-input",{model:{value:e.ruleForm.name_used_before,callback:function(r){e.$set(e.ruleForm,"name_used_before",r)},expression:"ruleForm.name_used_before"}})],1),r("el-form-item",{attrs:{label:"身份证号",prop:"id_card"}},[r("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.id_card,callback:function(r){e.$set(e.ruleForm,"id_card",r)},expression:"ruleForm.id_card"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-radio-group",{attrs:{disabled:""},model:{value:e.ruleForm.gender,callback:function(r){e.$set(e.ruleForm,"gender",r)},expression:"ruleForm.gender"}},[r("el-radio",{attrs:{label:1}},[e._v("男")]),r("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),r("el-form-item",{attrs:{label:"年龄",prop:"age"}},[r("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.age,callback:function(r){e.$set(e.ruleForm,"age",r)},expression:"ruleForm.age"}})],1),r("el-form-item",{attrs:{label:"标签",prop:"tags"}},[r("el-checkbox-group",{model:{value:e.ruleForm.tags,callback:function(r){e.$set(e.ruleForm,"tags",r)},expression:"ruleForm.tags"}},[r("el-checkbox",{attrs:{label:"社区矫正"}}),r("el-checkbox",{attrs:{label:"吸毒"}}),r("el-checkbox",{attrs:{label:"残疾人"}}),r("el-checkbox",{attrs:{label:"安置帮教"}}),r("el-checkbox",{attrs:{label:"矛盾冲突人员"}})],1)],1),r("el-form-item",{attrs:{label:"是否党员",prop:"is_party"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.is_party,callback:function(r){e.$set(e.ruleForm,"is_party",r)},expression:"ruleForm.is_party"}})],1),r("el-form-item",{attrs:{label:"省",prop:"native_place_province_id"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(r){return e.getdataone()}},model:{value:e.ruleForm.native_place_province_id,callback:function(r){e.$set(e.ruleForm,"native_place_province_id",r)},expression:"ruleForm.native_place_province_id"}},e._l(e.table,(function(e){return r("el-option",{key:e.id,attrs:{label:e.region_name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"市",prop:"value"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(r){return e.getdatatwo()}},model:{value:e.value,callback:function(r){e.value=r},expression:"value"}},e._l(e.lasttable,(function(e){return r("el-option",{key:e.id,attrs:{label:e.region_name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"区",prop:"native_place_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.native_place_id,callback:function(r){e.$set(e.ruleForm,"native_place_id",r)},expression:"ruleForm.native_place_id"}},e._l(e.finaltable,(function(e){return r("el-option",{key:e.id,attrs:{label:e.region_name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"行业",prop:"profession"}},[r("el-input",{model:{value:e.ruleForm.profession,callback:function(r){e.$set(e.ruleForm,"profession",r)},expression:"ruleForm.profession"}})],1),r("el-form-item",{attrs:{label:"身份证地址",prop:"id_card_address"}},[r("el-input",{model:{value:e.ruleForm.id_card_address,callback:function(r){e.$set(e.ruleForm,"id_card_address",r)},expression:"ruleForm.id_card_address"}})],1),r("el-form-item",{attrs:{label:"小区地址",prop:"residential_quarters_address"}},[r("el-input",{model:{value:e.ruleForm.residential_quarters_address,callback:function(r){e.$set(e.ruleForm,"residential_quarters_address",r)},expression:"ruleForm.residential_quarters_address"}})],1),r("el-form-item",{attrs:{label:"工作单位",prop:"company"}},[r("el-input",{model:{value:e.ruleForm.company,callback:function(r){e.$set(e.ruleForm,"company",r)},expression:"ruleForm.company"}})],1),r("el-form-item",{attrs:{label:"工作单位地址",prop:"company_address"}},[r("el-input",{model:{value:e.ruleForm.company_address,callback:function(r){e.$set(e.ruleForm,"company_address",r)},expression:"ruleForm.company_address"}})],1),r("el-form-item",{attrs:{label:"出生地址",prop:"birth_address"}},[r("el-input",{model:{value:e.ruleForm.birth_address,callback:function(r){e.$set(e.ruleForm,"birth_address",r)},expression:"ruleForm.birth_address"}})],1),r("el-form-item",{attrs:{label:"婚姻状况",prop:"marital_status"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.marital_status,callback:function(r){e.$set(e.ruleForm,"marital_status",r)},expression:"ruleForm.marital_status"}},[r("el-option",{attrs:{label:"未婚",value:0}}),r("el-option",{attrs:{label:"已婚",value:1}})],1)],1),r("el-form-item",{attrs:{label:"学历",prop:"education"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.education,callback:function(r){e.$set(e.ruleForm,"education",r)},expression:"ruleForm.education"}},[r("el-option",{attrs:{label:"小学",value:0}}),r("el-option",{attrs:{label:"初中",value:1}}),r("el-option",{attrs:{label:"高中",value:2}}),r("el-option",{attrs:{label:"大学",value:3}}),r("el-option",{attrs:{label:"硕士研究生",value:4}}),r("el-option",{attrs:{label:"博士研究生",value:5}})],1)],1),r("el-form-item",{attrs:{label:"宗教信仰",prop:"religion"}},[r("el-input",{model:{value:e.ruleForm.religion,callback:function(r){e.$set(e.ruleForm,"religion",r)},expression:"ruleForm.religion"}})],1),r("el-form-item",{attrs:{label:"是否常住人口",prop:"is_resident"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.is_resident,callback:function(r){e.$set(e.ruleForm,"is_resident",r)},expression:"ruleForm.is_resident"}})],1)],1)],1)])])},l=[],n=(t(7658),t(5809)),s=t(1502),i={data(){return{ruleForm:{name:"",name_used_before:"",age:"",id_card:"",address:"",gender:"",desc:"",tags:[],is_party:"",native_place_id:"",native_place_value:"",native_place_province_id:"",profession:"",id_card_address:"",residential_quarters_address:"",company:"",company_address:"",birth_address:"",education:"",marital_status:"",religion:"",is_resident:""},value:"",table:[],lasttable:[],finaltable:[],rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],gender:[{required:!0,message:"性别不能为空",trigger:"blur"}],residential_quarters_address:[{required:!0,message:"不能为空",trigger:"blur"}]}}},beforeRouteLeave(e,r,t){e.meta.keepAlive=!0,t()},mounted(){this.getlist(),this.getdata()},methods:{getlist(){const e=this.$route.query.id;(0,s.lA)({access_token:this.$store.state.token,id:e}).then((e=>{if(this.ruleForm=e,this.ruleForm.age=(0,n.J8)(e.id_card),null==e.tags)this.ruleForm.tags=[];else if(null!=e.tags){const r=e.tags.split(",");this.ruleForm.tags=r}(0,s.hZ)({id:e.native_place_id}).then((e=>{this.finaltable.push(e),(0,s.hZ)({id:e.parent_id}).then((e=>{this.value=e.region_name})),(0,s.KM)({parent_id:e.parent_id}).then((e=>{this.finaltable=e}))})),(0,s.KM)({parent_id:e.native_place_province_id}).then((e=>{this.lasttable=e}))}))},getdataone(){(0,s.KM)({parent_id:this.ruleForm.native_place_province_id}).then((e=>{this.value=[],this.ruleForm.native_place_id=[],this.lasttable=e}))},getdatatwo(){(0,s.KM)({parent_id:this.value}).then((e=>{this.ruleForm.native_place_id=[],this.finaltable=e}))},getdata(){(0,s.KM)({parent_id:1}).then((e=>{this.table=e}))},submitForm(){const e=this.ruleForm,r=this.$route.query.id,t=this.ruleForm.tags.toString();(0,s.Vx)({access_token:this.$store.state.token,name:e.name,id:r,name_used_before:e.name_used_before,address:e.address,gender:e.gender,desc:e.desc,tags:t,is_party:e.is_party,native_place_id:e.native_place_id,native_place_province_id:e.native_place_province_id,profession:e.profession,id_card_address:e.id_card_address,residential_quarters_address:e.residential_quarters_address,company:e.company,company_address:e.company_address,birth_address:e.birth_address,education:e.education,marital_status:e.marital_status,religion:e.religion,is_resident:e.is_resident}).then((e=>{this.$message.success("更新成功")}))}}},o=i,u=t(1001),d=(0,u.Z)(o,a,l,!1,null,null,null),c=d.exports},5809:function(e,r,t){t.d(r,{Hl:function(){return c},IT:function(){return u},J8:function(){return p},Kw:function(){return m},Ms:function(){return n},Q6:function(){return o},U_:function(){return a},WO:function(){return _},Wm:function(){return f},XE:function(){return d},Zs:function(){return b},eg:function(){return s},h7:function(){return l},hm:function(){return i}});t(7658);function a(e){return""==e?void 0:e}function l(e){return e.replace(/^(.{3})(?:\w+)(.{4})$/,"$1**$2")}function n(e){return 0==e?"女":"男"}function s(e){return 0==e?"否":"是"}function i(e){return 0==e?"自建房":1==e?"独立楼宇":2==e?"小区":void 0}function o(e){return 0==e?"公寓":1==e?"住宅":2==e?"商住两用":3==e?"商用":void 0}function u(e){return 0==e?"未婚":"已婚"}function d(e){return 0==e?"否":"是"}function c(e){return 0==e?"非党员":"党员"}function m(e){return 0==e?"否":"是"}function p(e){var r,t,a,l=0,n=e;if(!n)return l;var s=/(^\d{15}$)|(^\d{17}([0-9]|X)$)/;if(s.test(n)){if(15==n.length){var i=n.substring(6,12);r="19"+i.substring(0,2),t=i.substring(2,4),a=i.substring(4,6)}else 18==n.length&&(r=n.substring(6,10),t=n.substring(10,12),a=n.substring(12,14));var o=new Date,u=o.getMonth()+1,d=o.getDate();l=o.getFullYear()-r;return(u<t||u==t&&d<a)&&l--,l}return""}function _(e){var r=e;return parseInt(r.substr(16,1))%2==1?"男":"女"}function f(e){const r=l(e.tel),t=l(e.haoma),a={user:e.user,region:e.region,tel:r,haoma:t,address:e.address};return a}function b(e,r){let t=e.toString().length<13?new Date(1e3*e):new Date(e),a=t.getFullYear(),l=t.getMonth()+1,n=t.getDate(),s=t.getHours()<10?`0${t.getHours()}`:t.getHours(),i=t.getMinutes()<10?`0${t.getMinutes()}`:t.getMinutes(),o=t.getSeconds()<10?`0${t.getSeconds()}`:t.getSeconds();return r=r||"Y-M-D H:m:s",r=r.indexOf("Y")>-1?r.replace("Y",a):r,r=r.indexOf("M")>-1?r.replace("M",l):r,r=r.indexOf("D")>-1?r.replace("D",n):r,r=r.indexOf("H")>-1?r.replace("H",s):r,r=r.indexOf("h")>-1?r.replace("h",s>12?s-12:s):r,r=r.indexOf("m")>-1?r.replace("m",i):r,r=r.indexOf("s")>-1?r.replace("s",o):r,r}}}]);
//# sourceMappingURL=4771.7214bdf2.js.map